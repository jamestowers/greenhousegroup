{"version":3,"sources":["scripts.coffee"],"names":[],"mappings":"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","file":"scripts.js","sourceRoot":"/source/","sourcesContent":["# Fix IE consol.log bug\nif !window.console\n  window.console = {}\nif !window.console.log\n  window.console.log = ->\n\nwindow.latestKnownScrollY = 0\n\nwindow.dropshop = new Dropshop()\n\n# transition end event name\ntransEndEventNames =\n  'WebkitTransition': 'webkitTransitionEnd'\n  'MozTransition': 'transitionend'\n  'OTransition': 'oTransitionEnd'\n  'msTransition': 'MSTransitionEnd'\n  'transition': 'transitionend'\nwindow.transEndEventName = transEndEventNames[Modernizr.prefixed('transition')]\n\n$.fn.visible = (partial) ->\n  $t = $(this)\n  $w = $(window)\n  viewTop = latestKnownScrollY\n  viewBottom = viewTop + $w.height()\n  _top = $t.offset().top\n  _bottom = _top + $t.height()\n  compareTop = (if partial is true then _bottom else _top)\n  compareBottom = (if partial is true then _top else _bottom)\n  (compareBottom <= viewBottom) and (compareTop >= viewTop)\n\n\n\n##################################\n## requestAnimationFrame Polyfill\n##################################\n\nlastTime = 0\nvendors = [\n  \"ms\"\n  \"moz\"\n  \"webkit\"\n  \"o\"\n]\nx = 0\n\nwhile x < vendors.length and not window.requestAnimationFrame\n  window.requestAnimationFrame = window[vendors[x] + \"RequestAnimationFrame\"]\n  window.cancelAnimationFrame = window[vendors[x] + \"CancelAnimationFrame\"] or window[vendors[x] + \"CancelRequestAnimationFrame\"]\n  ++x\nunless window.requestAnimationFrame\n  window.requestAnimationFrame = (callback, element) ->\n    currTime = new Date().getTime()\n    timeToCall = Math.max(0, 16 - (currTime - lastTime))\n    id = window.setTimeout(->\n      callback currTime + timeToCall\n      return\n    , timeToCall)\n    lastTime = currTime + timeToCall\n    id\nunless window.cancelAnimationFrame\n  window.cancelAnimationFrame = (id) ->\n    clearTimeout id\n    return\n################################## \n## end requestAnimationFrame Polyfill\n##################################\n\n\n\n\nrepeatOften = ->\n  window.globalID = requestAnimationFrame(repeatOften)\n  return\n\n# ON SCROLL EVENTS\n\n# Call requestTick on window.scroll - see bottom\nrequestTick = ->\n  requestAnimationFrame dropshop.onScroll  unless window.ticking\n  window.ticking = true\n  return\n\n\n$(window).load ->\n  dropshop.$body.removeClass 'loading'\n\n$(window).scroll ->\n  window.latestKnownScrollY = window.scrollY\n  requestTick()\n\n$(window).resize ->\n  dropshop.setWidths()\n\n###$(window).on 'statechangestarted', ->\n  console.log '[scripts] stage change started'\n  dropshop.onPageFetch()\n  \n$(window).on 'statechangecomplete', ->\n  console.log '[scripts] stage change complete'\n  dropshop.onPageLoad()###\n"]}